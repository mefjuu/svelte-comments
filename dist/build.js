for(var B="function"==typeof Object.defineProperties?Object.defineProperty:function(q,F,t){if(t.get||t.set)throw new TypeError("ES3 does not support getters and setters.");q!=Array.prototype&&q!=Object.prototype&&(q[F]=t.value)},G="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,H=["Object","assign"],I=0;I<H.length-1;I++){var J=H[I];J in G||(G[J]={});G=G[J]}
var K=H[H.length-1],N=G[K],Z=N?N:function(q,F){for(var t=1;t<arguments.length;t++){var A=arguments[t];if(A)for(var C in A)Object.prototype.hasOwnProperty.call(A,C)&&(q[C]=A[C])}return q};Z!=N&&null!=Z&&B(G,K,{configurable:!0,writable:!0,value:Z});
(function(){function q(){}function F(a,b){var c=document.createComment("#if !saved"),k=a.A?null:C,d=k&&k(a,b),e=document.createTextNode("\n\n"),h=document.createComment("#if saved"),m=a.A?A:null,g=m&&m(a,b),f=document.createTextNode("\n\n"),p=document.createComment("#if error"),n=a.error?t:null,l=n&&n(a,b),z=document.createTextNode("\n"),u=document.createElement("input");u.type="hidden";b.l.u=u;u.value=a.u;return{b:function(a,b){a.insertBefore(c,b);d&&d.b(c.parentNode,c);a.insertBefore(e,b);a.insertBefore(h,
b);g&&g.b(h.parentNode,h);a.insertBefore(f,b);a.insertBefore(p,b);l&&l.b(p.parentNode,p);a.insertBefore(z,b);a.insertBefore(u,b)},update:function(a,e){var f=k;k=e.A?null:C;f===k&&d?d.update(a,e):(d&&d.a(!0),(d=k&&k(e,b))&&d.b(c.parentNode,c));f=m;m=e.A?A:null;f===m&&g?g.update(a,e):(g&&g.a(!0),(g=m&&m(e,b))&&g.b(h.parentNode,h));f=n;n=e.error?t:null;f===n&&l?l.update(a,e):(l&&l.a(!0),(l=n&&n(e,b))&&l.b(p.parentNode,p));u.value=e.u},a:function(a){d&&d.a(a);g&&g.a(a);l&&l.a(a);b.l.u===u&&(b.l.u=null);
a&&(v(c),v(e),v(h),v(f),v(p),v(z),v(u))}}}function t(){var a=document.createElement("div");a.style.cssText="margin-top: 10px;";a.className="alert alert-danger";a.appendChild(document.createTextNode("Sorry, there was an error"));return{b:function(b,c){b.insertBefore(a,c)},update:L,a:function(b){b&&v(a)}}}function A(){var a=document.createElement("div");a.className="alert alert-success";a.appendChild(document.createTextNode("Thanks for your feedback! Your comment will post as soon as I review it"));
return{b:function(b,c){b.insertBefore(a,c)},update:L,a:function(b){b&&v(a)}}}function C(a,b){function c(){b.save()}var k=document.createElement("div");a=document.createElement("div");a.className="form-group";k.appendChild(a);var d=document.createElement("input");b.l.name=d;d.type="text";d.className="form-control";d.id="inputName";d.placeholder="Name";a.appendChild(d);k.appendChild(document.createTextNode("\n  "));a=document.createElement("div");a.className="form-group";a.style.cssText="margin-top: 5px;";
k.appendChild(a);var e=document.createElement("textarea");b.l.f=e;e.setAttribute("maxLength","1000");e.rows="5";e.className="form-control";e.id="inputComment";e.placeholder="Comment - no markup please";a.appendChild(e);k.appendChild(document.createTextNode("\n\n  "));var h=document.createElement("button");h.type="button";h.className="btn btn-primary";h.addEventListener("click",c,!1);k.appendChild(h);h.appendChild(document.createTextNode("Save"));return{b:function(a,b){a.insertBefore(k,b)},update:L,
a:function(a){b.l.name===d&&(b.l.name=null);b.l.f===e&&(b.l.f=null);h.removeEventListener("click",c,!1);a&&v(k)}}}function w(a){a=a||{};this.l={};this.c=Object.assign(O.data(),a.data);this.j={w:Object.create(null),v:Object.create(null)};this.o=Object.create(null);this.g=a.g;this.B=a.B;this.h=F(this.c,this);a.target&&this.h.b(a.target,null)}function P(a,b,c,k){for(var d in b)if(d in c){var e=c[d],h=k[d];if(e!==h||"object"===typeof e){var m=b[d];if(m)for(var g=0;g<m.length;g+=1){var f=m[g];f.i||(f.i=
!0,f.call(a,e,h),f.i=!1)}}}}function v(a){a.parentNode.removeChild(a)}function L(){}function Q(a,b,c){if("comment"in b&&"object"===typeof a.f||a.f!==c.f)a.C=b.C=M.L.C(a.f)}function aa(a,b){function c(){b.set({I:!0})}var k=document.createElement("div"),d=document.createElement("div");d.className="comment";k.appendChild(d);var e=document.createElement("div");e.className="commentDate";d.appendChild(e);var h=document.createTextNode(a.C);e.appendChild(h);d.appendChild(document.createTextNode("\n    "));
e=document.createElement("h5");d.appendChild(e);var m=document.createTextNode(a.f.author);e.appendChild(m);d.appendChild(document.createTextNode("\n    "));e=document.createElement("div");d.appendChild(e);var g=document.createTextNode(a.f.text);e.appendChild(g);d.appendChild(document.createTextNode("\n    "));e=document.createElement("div");e.className="reply-link";d.appendChild(e);var f=document.createElement("a");f.addEventListener("click",c,!1);e.appendChild(f);f.appendChild(document.createTextNode("Reply"));
d.appendChild(document.createTextNode("\n    "));var p=document.createComment("#if replying");d.appendChild(p);var n=a.I?R:null,l=n&&n(a,b);l&&l.b(p.parentNode,p);return{b:function(a,b){a.insertBefore(k,b)},update:function(a,d){h.data=d.C;m.data=d.f.author;g.data=d.f.text;var c=n;n=d.I?R:null;c===n&&l?l.update(a,d):(l&&l.a(!0),(l=n&&n(d,b))&&l.b(p.parentNode,p))},a:function(a){f.removeEventListener("click",c,!1);l&&l.a(!1);a&&k.parentNode.removeChild(k)}}}function R(a,b){var c=new M.s.G({target:null,
g:b.g||b,data:{u:a.f.id}});return{b:function(a,b){c.h.b(a,b)},update:function(a,b){var d={};"comment"in a&&(d.u=b.f.id);Object.keys(d).length&&c.set(d)},a:function(a){c.a(a)}}}function D(a){a=a||{};this.c=Object.assign(M.data(),a.data);Q(this.c,this.c,{});this.j={w:Object.create(null),v:Object.create(null)};this.o=Object.create(null);this.g=a.g;this.B=a.B;this.m=[];this.h=aa(this.c,this);for(a.target&&this.h.b(a.target,null);this.m.length;)a=this.m.pop(),a.F.call(a.context)}function S(a,b,c,k){for(var d in b)if(d in
c){var e=c[d],h=k[d];if(e!==h||"object"===typeof e){var m=b[d];if(m)for(var g=0;g<m.length;g+=1){var f=m[g];f.i||(f.i=!0,f.call(a,e,h),f.i=!1)}}}}function ba(a,b){var c=r("div");c.className="add-comments";var k=new x.s.G({target:c,g:b.g||b}),d=document.createTextNode("\n\n"),e=r("div");e.className="comment-section";var h=r("ul");e.appendChild(h);var m=document.createComment("#each allComments");h.appendChild(m);for(var h=a.H,g=[],f=0;f<h.length;f+=1)g[f]=T(a,h,h[f],f,b),g[f].b(m.parentNode,m);return{b:function(a,
b){a.insertBefore(c,b);a.insertBefore(d,b);a.insertBefore(e,b)},update:function(a,d){for(var c=d.H,e=0;e<c.length;e+=1)g[e]?g[e].update(a,d,c,c[e],e):(g[e]=T(d,c,c[e],e,b),g[e].b(m.parentNode,m));for(e=c.length;e<g.length;e+=1)g[e].a(!0);g.length=c.length},a:function(a){k.a(!1);for(var b=0;b<g.length;b+=1)g[b].a(!1);a&&(y(c),y(d),y(e))}}}function T(a,b,c,k,d){var e=r("li"),h=new x.s.Comment({target:e,g:d.g||d,data:{f:c}});e.appendChild(document.createTextNode("\n      "));a=r("ul");e.appendChild(a);
var m=document.createComment("#each c1.children");a.appendChild(m);c=c.children;var g=[];for(a=0;a<c.length;a+=1)g[a]=U(c[a],d),g[a].b(m.parentNode,m);return{b:function(a,b){a.insertBefore(e,b)},update:function(a,b,c,e,k){e=c[k];var f={};"allComments"in a&&(f.f=e);Object.keys(f).length&&h.set(f);for(var f=e.children,l=0;l<f.length;l+=1)g[l]?g[l].update(a,b,c,e,k,f,f[l],l):(g[l]=U(f[l],d),g[l].b(m.parentNode,m));for(l=f.length;l<g.length;l+=1)g[l].a(!0);g.length=f.length},a:function(a){h.a(!1);for(var b=
0;b<g.length;b+=1)g[b].a(!1);a&&y(e)}}}function U(a,b){var c=r("li"),k=new x.s.Comment({target:c,g:b.g||b,data:{f:a}});c.appendChild(document.createTextNode("\n          "));var d=r("ul");c.appendChild(d);var e=document.createComment("#each c2.children");d.appendChild(e);a=a.children;for(var h=[],d=0;d<a.length;d+=1)h[d]=V(a[d],b),h[d].b(e.parentNode,e);return{b:function(a,b){a.insertBefore(c,b)},update:function(a,c,d,p,n,l,z,u){p=d[n];z=l[u];var g={};"allComments"in a&&(g.f=z);Object.keys(g).length&&
k.set(g);for(var g=z.children,f=0;f<g.length;f+=1)h[f]?h[f].update(a,c,d,p,n,l,z,u,g,g[f],f):(h[f]=V(g[f],b),h[f].b(e.parentNode,e));for(f=g.length;f<h.length;f+=1)h[f].a(!0);h.length=g.length},a:function(a){k.a(!1);for(var b=0;b<h.length;b+=1)h[b].a(!1);a&&y(c)}}}function V(a,b){var c=r("li"),k=new x.s.Comment({target:c,g:b.g||b,data:{f:a}});c.appendChild(document.createTextNode("\n              "));var d=r("ul");c.appendChild(d);var e=document.createComment("#each c3.children");d.appendChild(e);
a=a.children;for(var h=[],d=0;d<a.length;d+=1)h[d]=W(a[d],b),h[d].b(e.parentNode,e);return{b:function(a,b){a.insertBefore(c,b)},update:function(a,d,c,p,n,l,z,u,r,q,t){p=c[n];z=l[u];q=r[t];var g={};"allComments"in a&&(g.f=q);Object.keys(g).length&&k.set(g);for(var g=q.children,f=0;f<g.length;f+=1)h[f]?h[f].update(a,d,c,p,n,l,z,u,r,q,t,g,g[f],f):(h[f]=W(g[f],b),h[f].b(e.parentNode,e));for(f=g.length;f<h.length;f+=1)h[f].a(!0);h.length=g.length},a:function(a){k.a(!1);for(var b=0;b<h.length;b+=1)h[b].a(!1);
a&&y(c)}}}function W(a,b){var c=r("li"),k=new x.s.Comment({target:c,g:b.g||b,data:{f:a}});c.appendChild(document.createTextNode("\n                    "));var d=r("ul");c.appendChild(d);var e=document.createComment("#each c4.children");d.appendChild(e);a=a.children;for(var h=[],d=0;d<a.length;d+=1)h[d]=X(a[d],b),h[d].b(e.parentNode,e);return{b:function(a,b){a.insertBefore(c,b)},update:function(a,c,d,p,n,l,q,u,r,t,v,x,w,y){p=d[n];q=l[u];t=r[v];w=x[y];var g={};"allComments"in a&&(g.f=w);Object.keys(g).length&&
k.set(g);for(var g=w.children,f=0;f<g.length;f+=1)h[f]?h[f].update(a,c,d,p,n,l,q,u,r,t,v,x,w,y,g,g[f],f):(h[f]=X(g[f],b),h[f].b(e.parentNode,e));for(f=g.length;f<h.length;f+=1)h[f].a(!0);h.length=g.length},a:function(a){k.a(!1);for(var b=0;b<h.length;b+=1)h[b].a(!1);a&&y(c)}}}function X(a,b){var c=r("li"),k=new x.s.Comment({target:c,g:b.g||b,data:{f:a}});return{b:function(a,b){a.insertBefore(c,b)},update:function(a,b,c,m,g,f,p,n,l,q,r,t,v,w,x,y,A){y=x[A];b={};"allComments"in a&&(b.f=y);Object.keys(b).length&&
k.set(b)},a:function(a){k.a(!1);a&&y(c)}}}function E(a){a=a||{};this.c=Object.assign(x.data(),a.data);this.j={w:Object.create(null),v:Object.create(null)};this.o=Object.create(null);this.g=a.g;this.B=a.B;this.m=[];this.h=ba(this.c,this);for(a.target&&this.h.b(a.target,null);this.m.length;){var b=this.m.pop();b.F.call(b.context)}a.g?a.g.m.push({F:x.K,context:this}):x.K.call(this)}function Y(a,b,c,k){for(var d in b)if(d in c){var e=c[d],h=k[d];if(e!==h||"object"===typeof e){var m=b[d];if(m)for(var g=
0;g<m.length;g+=1){var f=m[g];f.i||(f.i=!0,f.call(a,e,h),f.i=!1)}}}}function r(a){return document.createElement(a)}function y(a){a.parentNode.removeChild(a)}q.prototype.N=function(a,b,c){return fetch(commentCtx.url,{method:"POST",mode:"cors",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify({parentId:a,articleId:commentCtx.articleId,author:b,text:c})})};q.prototype.M=function(){return fetch(commentCtx.url+commentCtx.articleId).then(function(a){return a.json()})};var O=function(){var a=
new q;return{data:function(){return{A:!1,error:!1,u:null}},methods:{save:function(){var b=this,c=this.l.f.value,k=this.l.name.value;c&&k&&a.N(this.l.u.value||null||null,k,c).then(function(){b.set({A:!0});b.set({error:!1})}).catch(function(a){console.log(a);b.set({error:!0});b.set({A:!1})})}}}}();w.prototype=O.methods;w.prototype.get=function(a){return a?this.c[a]:this.c};w.prototype.D=function(a,b){if(a=a in this.o&&this.o[a].slice())for(var c=0;c<a.length;c+=1)a[c].call(this,b)};w.prototype.observe=
function(a,b,c){var k=c&&c.defer?this.j.w:this.j.v;(k[a]||(k[a]=[])).push(b);c&&!1===c.J||(b.i=!0,b.call(this,this.c[a]),b.i=!1);return{cancel:function(){var c=k[a].indexOf(b);~c&&k[a].splice(c,1)}}};w.prototype.set=function(a){var b=this.c;this.c=Object.assign({},b,a);P(this,this.j.w,a,b);this.h&&this.h.update(a,this.c);P(this,this.j.v,a,b)};w.prototype.a=function(a){this.D("teardown");this.h.a(!1!==a);this.h=null;this.c={}};var M=function(){return{data:function(){return{f:{},I:!1}},L:{C:function(a){return(new Date(a.created)).toDateString()}},
s:{G:w}}}();D.prototype.get=function(a){return a?this.c[a]:this.c};D.prototype.D=function(a,b){if(a=a in this.o&&this.o[a].slice())for(var c=0;c<a.length;c+=1)a[c].call(this,b)};D.prototype.observe=function(a,b,c){var k=c&&c.defer?this.j.w:this.j.v;(k[a]||(k[a]=[])).push(b);c&&!1===c.J||(b.i=!0,b.call(this,this.c[a]),b.i=!1);return{cancel:function(){var c=k[a].indexOf(b);~c&&k[a].splice(c,1)}}};D.prototype.set=function(a){var b=this.c;this.c=Object.assign({},b,a);Q(this.c,a,b);S(this,this.j.w,a,b);
this.h&&this.h.update(a,this.c);for(S(this,this.j.v,a,b);this.m.length;)a=this.m.pop(),a.F.call(a.context)};D.prototype.a=function(a){this.D("teardown");this.h.a(!1!==a);this.h=null;this.c={}};var x=function(){var a=new q;return{K:function(){var b=this;a.M().then(function(a){console.log(a);b.set({H:a})})},data:function(){return{H:[]}},s:{Comment:D,G:w}}}();E.prototype.get=function(a){return a?this.c[a]:this.c};E.prototype.D=function(a,b){if(a=a in this.o&&this.o[a].slice())for(var c=0;c<a.length;c+=
1)a[c].call(this,b)};E.prototype.observe=function(a,b,c){var k=c&&c.defer?this.j.w:this.j.v;(k[a]||(k[a]=[])).push(b);c&&!1===c.J||(b.i=!0,b.call(this,this.c[a]),b.i=!1);return{cancel:function(){var c=k[a].indexOf(b);~c&&k[a].splice(c,1)}}};E.prototype.set=function(a){var b=this.c;this.c=Object.assign({},b,a);Y(this,this.j.w,a,b);this.h&&this.h.update(a,this.c);for(Y(this,this.j.v,a,b);this.m.length;)a=this.m.pop(),a.F.call(a.context)};E.prototype.a=function(a){this.D("teardown");this.h.a(!1!==a);
this.h=null;this.c={}};new E({target:document.querySelector("main")})})();
